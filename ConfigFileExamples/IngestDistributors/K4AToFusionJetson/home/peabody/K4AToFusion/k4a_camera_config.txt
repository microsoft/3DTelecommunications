###
# General settings -- currently applies to all cameras
#
# Color Format (see K4A documentation for more details)
#   0 - K4A_IMAGE_FORMAT_COLOR_MJPG
#   1 - K4A_IMAGE_FORMAT_COLOR_NV12
#   2 - K4A_IMAGE_FORMAT_COLOR_YUY2
#   3 - K4A_IMAGE_FORMAT_COLOR_BGRA32
ColorFormat = 0

# Color Resolution
#   0 - K4A_COLOR_RESOLUTION_OFF  
#   1 - K4A_COLOR_RESOLUTION_720P
#   2 - K4A_COLOR_RESOLUTION_1080P
#   3 - K4A_COLOR_RESOLUTION_1440P
#   4 - K4A_COLOR_RESOLUTION_1536P
#   5 - K4A_COLOR_RESOLUTION_2160P
#   6 - K4A_COLOR_RESOLUTION_3072P
ColorResolution = 2

# Depth mode
#   0 - K4A_DEPTH_MODE_OFF
#   1 - K4A_DEPTH_MODE_NFOV_2X2BINNED (320x288)
#   2 - K4A_DEPTH_MODE_NFOV_UNBINNED  (640x576)
#   3 - K4A_DEPTH_MODE_WFOV_2X2BINNED (512x512)
#   4 - K4A_DEPTH_MODE_WFOV_UNBINNED  (1024x1024)
#   5 - K4A_DEPTH_MODE_PASSIVE_IR     (1024x1024)
DepthMode = 2

# Camera FPS
#   0 - K4A_FRAMES_PER_SECOND_5
#   1 - K4A_FRAMES_PER_SECOND_15
#   2 - K4A_FRAMES_PER_SECOND_30
CameraFPS = 1

# Sync images only
# Only produce k4a_capture_t objects if they contain synchronized color and depth images.
SyncImages = true

# Skip first N captured frames (important in multi camera setup)
SkipFirstNFrames = 10

# Camera start mode (only useful for multi-camera)
#   0 - auto with delay (delay useful for master/subordinate scenarios on same machine)
#   1 - wait for user input before each camera (indicated in console when ready, useful for multi-machine setups)
#   2 - wait for user input before master (indicated in console when ready, useful for multi-machine setups)
#   3 - wait for signal from control panel [SLAVE]
#   4 - wait for signla from control panel [MASTER]
CameraStartMode = 3

# Start delay in milliseconds (only used when camera start mode is set to 0)
StartDelayMS = 0

# IR Range scale (only useful when writing to disk)
# [min] [max]  where IrVal(v) = (v - min) / (max - min)
MinIRRange = 0
MaxIRRange = 250

# Min Depth in cm, Max Depth in cm (depth beyond which is flagged as bg)
MinDepth = 100
MaxDepth = 3000

# fusion expected depth dimensions
# depth frames will be padded to this size if they do not match
# [width] [height]
FusionWidth = 1024
FusionHeight = 1024

# apply mask
# if != 0, then a fg/bg mask will be computed per pixel based on BG images, otherwise raw point cloud will be sent (all points w/foreground mask)
ApplyMask = true

# num std deviations
# when generating the mask it will look at how far a new depth value is from the computed background frame. Anything closer than N std deviations away is counted as FG
NumStdDevFromBG = 3.0

# Stream port offset (all cameras initialized for a session w/this config will stream to fusion over port 30000 + <port_offset> + i
PortOffset = 0

# Recording destination -- NOTE leave out trailing '\'
RecordingPath = .

# Calibration file format.
# 0 - Face3d
# 1 - Calib Studio
CalibFormat = 1

# Calibration path -- ONLY USED WHEN STREAMING, BG, calibration, and offline captures are raw to allow for postprocess w/different calibrations
CalibrationPath = /home/peabody/K4AToFusion/

# determines whether we want to send IR info along with color for calibration (only in calibration mode)
calibCaptureActiveIR = false
# determines if we are going to run in factory calib mode (for calibration or streaming)
UseFactoryCalib = true

# How the calibration file folders are saved out (Multiview Calib expects "cam0, cam1...etc") 
OutputForMultiViewCalib = true

# Defines how frequently images are saved to disk when doing calib capture (recommended values for Muscle's tool: 80, 10; for MultiviewCalib: 1, 1)
FrameRecordingFrequency = 1
FrameToGrabEachBurst = 10

# If we're using MultiViewCalib saving format, we don't capture every frame ,so there's a server that triggers the other clients to capture. This is the server's IP address
CalibPublisherIPAddress = 192.168.101.1
CalibPublisherPort = 14503

# Control Panel connection
ControlPanelIPAddress = 192.168.101.250
EventPort = 14502
StatusPort = 14502

# Num K Params -- number of distortion parameters to use, 3 or 6
NumKParams = 3



###
# Per-camera order/configuration (empty, or no serials is also valid, will default to all connected cameras in standalone mode)
# [k4a_camera_serial] [k4a_sync_mode] [k4a_sync_delay] [brightness] [contrast] [whitebalance] [gain] [exposure]
#
# Currently data from each camera will be served to fusion on a different port. Ordering is only important
# for multicamera master/subordinate scenarios as it indicates which cameras to start. 
#
# k4a_sync_mode values (per K4A sdk documentation):
#  0 - K4A_WIRED_SYNC_MODE_STANDALONE,  Neither 'Sync In' or 'Sync Out' connections are used.
#  1 - K4A_WIRED_SYNC_MODE_MASTER,      The 'Sync Out' jack is enabled and synchronization data it driven out the connected wire.
#  2 - K4A_WIRED_SYNC_MODE_SUBORDINATE  The 'Sync In' jack is used for synchronization and 'Sync Out' is driven for the next device in the chain. 
#                                       'Sync Out' is a mirror of 'Sync In' for this mode.                                   
# k4a_sync_delay meaning:
#   If this camera is a subordinate, this sets the capture delay between the color camera capture and the external
#   input pulse. A setting of zero indicates that the master and subordinate color images should be aligned.
#   This setting does not effect the 'Sync out' connection.
#   This value must be positive and range from zero to one capture period.
#   If this is not a subordinate, then this value is ignored.
#
# brightness:   0 to 255. The default value is 128.
# contrast:     0 to 10. The default is 5. Auto is not supported.
# whitebalance: The unit is degrees Kelvin. The setting must be set to a value evenly divisible by 10 degrees. Setting to negative will set to auto.
# gain:         0 to 255

K4ASettingsCam0 = 000541491912 2 0 150 6 -1 0 6000
